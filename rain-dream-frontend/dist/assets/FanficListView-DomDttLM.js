import{g as T}from"./item-B8raeaaP.js";import{_ as w,p as C,c as k,b as x,a,w as r,h as L,r as _,i as V,o as f,e as m,g as h}from"./index-DpViZ-ad.js";import"./http-DCShZfjV.js";const B={class:"card-panel panel"},N={key:1},U={__name:"FanficListView",setup(z){const i=L([]),b=L(0),p=V({}),d=async()=>{const l=await T(p),t=Array.isArray(l==null?void 0:l.data)?l.data:[];i.value=t.map(e=>{var n,s,c,o,u,g,y,v;return{id:e.id,storeUrl:e.store_url??"",content:e.content??"",title:e.title??"",cp:e.cp,author:e.author??"",sourceUrl:e.source_url??"",trackingTypeLabel:e.tracking_type_label??"",rating:e.rating??"",itemId:((n=e.fanfic_vo)==null?void 0:n.item_id)??"",eraLabel:((s=e.fanfic_vo)==null?void 0:s.era_label)??"",charSetting:((c=e.fanfic_vo)==null?void 0:c.char_setting)??"",lengthTypeLabel:((o=e.fanfic_vo)==null?void 0:o.length_type_label)??"",workTypeLabel:((u=e.fanfic_vo)==null?void 0:u.work_type_label)??"",updateDate:((g=e.fanfic_vo)==null?void 0:g.update_date)??"-",endingTypeLabel:((y=e.fanfic_vo)==null?void 0:y.ending_type_label)??"",readCount:((v=e.fanfic_vo)==null?void 0:v.read_count)??0}}),b.value=Number((l==null?void 0:l.total)??i.value.length)};return C(d),(l,t)=>{const e=_("el-table-column"),n=_("el-link"),s=_("el-table"),c=_("el-pagination");return f(),k("section",B,[t[3]||(t[3]=x("h2",null,"文章列表",-1)),a(s,{data:i.value,stripe:"",fit:"","table-layout":"auto"},{default:r(()=>[a(e,{prop:"eraLabel",label:"年代"}),a(e,{prop:"title",label:"名称"}),a(e,{prop:"author",label:"作者"}),a(e,{prop:"trackingTypeLabel",label:"追踪"}),a(e,{prop:"rating",label:"评分"}),a(e,{prop:"lengthTypeLabel",label:"篇幅"}),a(e,{prop:"workTypeLabel",label:"状态"}),a(e,{prop:"endingTypeLabel",label:"结局"}),a(e,{prop:"updateDate",label:"上次更新"}),a(e,{label:"来源"},{default:r(({row:o})=>[o.sourceUrl?(f(),m(n,{key:0,href:o.sourceUrl,target:"_blank",rel:"noopener noreferrer"},{default:r(()=>[...t[1]||(t[1]=[h(" 点击跳转 ",-1)])]),_:1},8,["href"])):(f(),k("span",N,"-"))]),_:1}),a(e,{label:"操作","class-name":"op-col"},{default:r(({row:o})=>[a(n,{onClick:u=>l.$router.push(`/fanfic/${o.id}`)},{default:r(()=>[...t[2]||(t[2]=[h("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a(c,{layout:"prev, pager, next",total:b.value,"page-size":p.size,"current-page":p.page,onCurrentChange:t[0]||(t[0]=o=>{p.page=o,d()})},null,8,["total","page-size","current-page"])])}}},$=w(U,[["__scopeId","data-v-e15591c3"]]);export{$ as default};
