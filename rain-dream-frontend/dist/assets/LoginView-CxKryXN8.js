import{_ as y,c as h,a as o,w as l,r as n,u as k,o as _,b as x,t as i,d as C,e as B,f as N,g as f,h as v,i as E,E as m}from"./index-Di_xo8Hi.js";import{u as R}from"./auth-sR_wYx8K.js";import"./http-CRxuZnxf.js";const S={class:"auth page-shell"},U={__name:"LoginView",setup(D){const p=R(),w=k(),r=v(!1),t=v(!1),e=E({username:"",password:"",phone:""}),V=async()=>{if(!e.username||!e.password)return m.warning("请填写用户名和密码");r.value=!0;try{if(t.value){await p.register(e),m.success("注册成功，请登录"),t.value=!1;return}await p.login(e),m.success("登录成功"),w.push("/dashboard")}finally{r.value=!1}};return(L,a)=>{const u=n("el-input"),d=n("el-form-item"),c=n("el-button"),g=n("el-form"),b=n("el-card");return _(),h("div",S,[o(b,{class:"auth-card card-panel"},{default:l(()=>[x("h2",null,i(t.value?"注册":"登录")+" RainDream",1),o(g,{model:e,"label-position":"top",onSubmit:a[4]||(a[4]=C(()=>{},["prevent"]))},{default:l(()=>[o(d,{label:"用户名"},{default:l(()=>[o(u,{modelValue:e.username,"onUpdate:modelValue":a[0]||(a[0]=s=>e.username=s)},null,8,["modelValue"])]),_:1}),o(d,{label:"密码"},{default:l(()=>[o(u,{modelValue:e.password,"onUpdate:modelValue":a[1]||(a[1]=s=>e.password=s),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),t.value?(_(),B(d,{key:0,label:"手机号"},{default:l(()=>[o(u,{modelValue:e.phone,"onUpdate:modelValue":a[2]||(a[2]=s=>e.phone=s)},null,8,["modelValue"])]),_:1})):N("",!0),o(c,{type:"primary",loading:r.value,onClick:V},{default:l(()=>[f(i(t.value?"注册并登录":"登录"),1)]),_:1},8,["loading"]),o(c,{text:"",onClick:a[3]||(a[3]=s=>t.value=!t.value)},{default:l(()=>[f(i(t.value?"已有账号，去登录":"没有账号，去注册"),1)]),_:1})]),_:1},8,["model"])]),_:1})])}}},T=y(U,[["__scopeId","data-v-2039b997"]]);export{T as default};
