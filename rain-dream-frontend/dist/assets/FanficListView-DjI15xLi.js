import{g as C}from"./item-WbUbsj5p.js";import{_ as x,p as V,c as k,b as m,a as l,w as i,h as d,r as c,i as W,o as u,e as B,g as L}from"./index-Di_xo8Hi.js";import"./http-CRxuZnxf.js";const D={class:"card-panel panel"},N={key:1},U={__name:"FanficListView",setup($){const f=d([]),b=d(0),w=d(null),p=W({}),h=async()=>{const t=await C(p),a=Array.isArray(t==null?void 0:t.data)?t.data:[];f.value=a.map(e=>{var r,n,s,o,_,g,y,v;return{id:e.id,storeUrl:e.store_url??"",content:e.content??"",title:e.title??"",cp:e.cp,author:e.author??"",sourceUrl:e.source_url??"",trackingTypeLabel:e.tracking_type_label??"",rating:e.rating??"",itemId:((r=e.fanfic_vo)==null?void 0:r.item_id)??"",eraLabel:((n=e.fanfic_vo)==null?void 0:n.era_label)??"",charSetting:((s=e.fanfic_vo)==null?void 0:s.char_setting)??"",lengthTypeLabel:((o=e.fanfic_vo)==null?void 0:o.length_type_label)??"",workTypeLabel:((_=e.fanfic_vo)==null?void 0:_.work_type_label)??"",updateDate:((g=e.fanfic_vo)==null?void 0:g.update_date)??"-",endingTypeLabel:((y=e.fanfic_vo)==null?void 0:y.ending_type_label)??"",readCount:((v=e.fanfic_vo)==null?void 0:v.read_count)??0}}),b.value=Number((t==null?void 0:t.total)??f.value.length)},T=t=>{var n;if(!t.shiftKey)return;const a=(n=w.value)==null?void 0:n.$el;if(!a)return;const e=a.querySelector(".el-table__body-wrapper .el-scrollbar__wrap")||a.querySelector(".el-table__body-wrapper");if(!e||e.scrollWidth<=e.clientWidth)return;const r=Math.abs(t.deltaX)>0?t.deltaX:t.deltaY;e.scrollLeft+=r,t.preventDefault()};return V(h),(t,a)=>{const e=c("el-table-column"),r=c("el-link"),n=c("el-table"),s=c("el-pagination");return u(),k("section",D,[a[3]||(a[3]=m("h2",null,"文章列表",-1)),m("div",{class:"table-wrap",onWheelCapture:T},[l(n,{ref_key:"tableRef",ref:w,data:f.value,stripe:"",fit:"","table-layout":"fixed",style:{width:"100%"}},{default:i(()=>[l(e,{prop:"eraLabel",label:"年代","min-width":"80","show-overflow-tooltip":""}),l(e,{prop:"title",label:"名称","min-width":"160","show-overflow-tooltip":""}),l(e,{prop:"author",label:"作者","min-width":"120","show-overflow-tooltip":""}),l(e,{prop:"trackingTypeLabel",label:"追踪","min-width":"80","show-overflow-tooltip":""}),l(e,{prop:"rating",label:"评分","min-width":"70"}),l(e,{prop:"lengthTypeLabel",label:"篇幅","min-width":"80","show-overflow-tooltip":""}),l(e,{prop:"workTypeLabel",label:"状态","min-width":"80","show-overflow-tooltip":""}),l(e,{prop:"endingTypeLabel",label:"结局","min-width":"80","show-overflow-tooltip":""}),l(e,{prop:"updateDate",label:"上次更新","min-width":"110","show-overflow-tooltip":""}),l(e,{label:"来源","min-width":"110"},{default:i(({row:o})=>[o.sourceUrl?(u(),B(r,{key:0,href:o.sourceUrl,target:"_blank",rel:"noopener noreferrer"},{default:i(()=>[...a[1]||(a[1]=[L(" 点击跳转 ",-1)])]),_:1},8,["href"])):(u(),k("span",N,"-"))]),_:1}),l(e,{label:"操作","class-name":"op-col","min-width":"80"},{default:i(({row:o})=>[l(r,{onClick:_=>t.$router.push(`/fanfic/${o.id}`)},{default:i(()=>[...a[2]||(a[2]=[L("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])],32),l(s,{layout:"prev, pager, next",total:b.value,"page-size":p.size,"current-page":p.page,onCurrentChange:a[0]||(a[0]=o=>{p.page=o,h()})},null,8,["total","page-size","current-page"])])}}},F=x(U,[["__scopeId","data-v-fccc625a"]]);export{F as default};
