import{m as r}from"./index-B-YO1h8-.js";import{h as o}from"./http-B_KznLVC.js";const s=t=>o.post("/auth/login",t),n=t=>o.post("/auth/register",t),m=r("auth",{state:()=>({token:localStorage.getItem("rd_token")||"",username:localStorage.getItem("rd_user")||""}),getters:{isAuthed:t=>!!t.token},actions:{async login(t){const e=await s(t);if(!(e!=null&&e.token))throw new Error("登录返回缺少 token，请检查后端响应结构");this.token=e.token,this.username=t.username,localStorage.setItem("rd_token",this.token),localStorage.setItem("rd_user",this.username)},async register(t){return n(t)},logout(){this.token="",this.username="",localStorage.removeItem("rd_token"),localStorage.removeItem("rd_user")}}});export{m as u};
